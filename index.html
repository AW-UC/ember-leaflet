<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ember-leaflet by gabesmed</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>ember-leaflet</h1>
        <p>Ember + Leaflet = Fun with maps</p>

        <p class="view"><a href="https://github.com/gabesmed/ember-leaflet">View the Project on GitHub <small>gabesmed/ember-leaflet</small></a></p>


        <ul>
          <li><a href="https://github.com/gabesmed/ember-leaflet/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/gabesmed/ember-leaflet/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/gabesmed/ember-leaflet">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="emberleaflet-" class="anchor" href="#emberleaflet-"><span class="octicon octicon-link"></span></a>EmberLeaflet <a href="http://travis-ci.org/gabesmed/ember-leaflet"><img src="https://secure.travis-ci.org/gabesmed/ember-leaflet.png?branch=master" alt="Build Status"></a>
</h1>

<h2>
<a name="ember--leaflet--fun-with-maps" class="anchor" href="#ember--leaflet--fun-with-maps"><span class="octicon octicon-link"></span></a>Ember + Leaflet = Fun with maps!</h2>

<p>EmberLeaflet aims to make working with Leaflet layers in your Ember app as <strong>easy, declarative and composable</strong> as Ember's View classes make working with DOM elements.</p>

<p>Wherever possible, the design is analogous to Ember's View, CollectionView and ContainerView architecture. EmberLeaflet provides functionality for maps, tile layers, markers, polylines and geometry, and popups. It provides hooks wherever possible for easy extensibility into more custom Leaflet behavior.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>A simple map in Ember - only one line of code!</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MapView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span>
</pre></div>

<p>Specify center, zoom and options:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MapView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">center</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713282</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006978</span><span class="p">),</span>
    <span class="nx">zoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span><span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">19</span><span class="p">,</span> <span class="nx">minZoom</span><span class="o">:</span> <span class="mi">0</span><span class="p">}</span>    
<span class="p">});</span>
</pre></div>

<p>Customize tiles:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">tileUrl</span><span class="o">:</span> <span class="s1">'http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png'</span><span class="p">,</span>
    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span><span class="nx">key</span><span class="o">:</span> <span class="s1">'API-key'</span><span class="p">,</span> <span class="nx">styleId</span><span class="o">:</span> <span class="mi">997</span><span class="p">}</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MapView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">childLayers</span><span class="o">:</span> <span class="p">[</span><span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>

<p>Add some markers:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713282</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006978</span><span class="p">)},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713465</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006753</span><span class="p">)},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713873</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006404</span><span class="p">)}]</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MapWithMarkersView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">childLayers</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">,</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>

<p>Bind to a controller, and markers are added, removed, and moved based on their content binding.</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">contentBinding</span><span class="o">:</span> <span class="s1">'controller'</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MapWithBoundMarkersView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">childLayers</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">,</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">]</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MapWithBoundMarkersController</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">ArrayController</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713282</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006978</span><span class="p">)},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713465</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006753</span><span class="p">)},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713873</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006404</span><span class="p">)}]</span>
<span class="p">});</span>
</pre></div>

<p>Add functionality to marker class with mixins.</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">DraggableMarker</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span>
    <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">DraggableMixin</span><span class="p">,</span> <span class="p">{});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MarkerWithPopup</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span>
        <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">PopupMixin</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">popupContent</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">computed</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s1">'content.title'</span><span class="p">),</span>
    <span class="nx">popupOptions</span><span class="o">:</span> <span class="p">{</span><span class="nx">offset</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">36</span><span class="p">)}</span>
<span class="p">});</span>
</pre></div>

<p>Customizing marker class:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MarkerLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">icon</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">DivIcon</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">iconSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
    <span class="p">}),</span>
    <span class="nx">options</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">html</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'content.title'</span><span class="p">),</span>
            <span class="nx">icon</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'icon'</span><span class="p">)</span>
        <span class="p">};</span>
    <span class="p">}.</span><span class="nx">property</span><span class="p">()</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">TitledMarkerCollectionLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713282</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006978</span><span class="p">),</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">'Gas'</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713465</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006753</span><span class="p">),</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">'Café'</span><span class="p">},</span>
        <span class="p">{</span><span class="nx">location</span><span class="o">:</span> <span class="nx">L</span><span class="p">.</span><span class="nx">latLng</span><span class="p">(</span><span class="mf">40.713873</span><span class="p">,</span> <span class="o">-</span><span class="mf">74.006404</span><span class="p">),</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">'ATM'</span><span class="p">}],</span>
    <span class="nx">itemLayerClass</span><span class="o">:</span> <span class="nx">App</span><span class="p">.</span><span class="nx">MarkerLayer</span>
<span class="p">});</span>
</pre></div>

<p>Create your own tile layers:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">_newLayer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileJSON</span><span class="p">.</span><span class="nx">createTileLayer</span><span class="p">(</span><span class="nx">myTileJson</span><span class="p">);</span>
    <span class="p">}</span>  
<span class="p">});</span>
</pre></div>

<p>Incorporate other leaflet layer classes:</p>

<div class="highlight"><pre><span class="nx">App</span><span class="p">.</span><span class="nx">MarkerClusterLayer</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span><span class="nx">disableClusteringAtZoom</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span> <span class="nx">showCoverageOnHover</span><span class="o">:</span> <span class="kc">false</span><span class="p">},</span>
    <span class="nx">childLayers</span><span class="o">:</span> <span class="p">[</span><span class="nx">App</span><span class="p">.</span><span class="nx">MarkerCollectionLayer</span><span class="p">],</span>
    <span class="nx">_newLayer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">MarkerClusterGroup</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'options'</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">App</span><span class="p">.</span><span class="nx">MapWithClusteredMarkersView</span> <span class="o">=</span> <span class="nx">EmberLeaflet</span><span class="p">.</span><span class="nx">MapView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">childLayers</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">,</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">MarkerClusterLayer</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>

<h2>
<a name="build-it" class="anchor" href="#build-it"><span class="octicon octicon-link"></span></a>Build It</h2>

<ol>
<li><code>git clone https://github.com/gabesmed/ember-leaflet.git</code></li>
<li><code>bundle</code></li>
<li><code>bundle exec rake dist</code></li>
<li><code>cp dist/modules/ember-leaflet.js myapp/</code></li>
</ol><h2>
<a name="running-unit-tests" class="anchor" href="#running-unit-tests"><span class="octicon octicon-link"></span></a>Running unit tests</h2>

<p>Run <code>bundle exec rackup</code> and open <a href="http://localhost:9292">http://localhost:9292</a> in a browser.</p>

<h2>
<a name="thanks" class="anchor" href="#thanks"><span class="octicon octicon-link"></span></a>Thanks</h2>

<ul>
<li>Thanks to the contributors to <a href="https://github.com/emberjs/list-view">emberjs/list-view</a>, from whom I cribbed this project skeleton.</li>
<li>Thanks to everyone who makes Ember a joy to work with!</li>
<li>Thanks to the makers of Leaflet, hooray for maps!</li>
<li>Thanks to <code>miguelcobain</code>, whose <a href="https://github.com/miguelcobain/ember-leaflet">ember-leaflet library</a> was the inspiration to polish and publish this one.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/gabesmed">gabesmed</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>