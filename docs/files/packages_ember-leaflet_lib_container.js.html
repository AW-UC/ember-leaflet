<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>packages/ember-leaflet/lib/container.js - EmberLeaflet</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="EmberLeaflet"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/EmberLeaflet.ArrayPathLayer.html">EmberLeaflet.ArrayPathLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.BoundsMixin.html">EmberLeaflet.BoundsMixin</a></li>
            
                <li><a href="../classes/EmberLeaflet.CircleLayer.html">EmberLeaflet.CircleLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.CollectionBoundsMixin.html">EmberLeaflet.CollectionBoundsMixin</a></li>
            
                <li><a href="../classes/EmberLeaflet.CollectionLayer.html">EmberLeaflet.CollectionLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.ContainerLayer.html">EmberLeaflet.ContainerLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.DraggableMixin.html">EmberLeaflet.DraggableMixin</a></li>
            
                <li><a href="../classes/EmberLeaflet.EmptyLayer.html">EmberLeaflet.EmptyLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.Layer.html">EmberLeaflet.Layer</a></li>
            
                <li><a href="../classes/EmberLeaflet.LayerMixin.html">EmberLeaflet.LayerMixin</a></li>
            
                <li><a href="../classes/EmberLeaflet.MapView.html">EmberLeaflet.MapView</a></li>
            
                <li><a href="../classes/EmberLeaflet.MarkerCollectionLayer.html">EmberLeaflet.MarkerCollectionLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.MarkerLayer.html">EmberLeaflet.MarkerLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.PathBoundsLayer.html">EmberLeaflet.PathBoundsLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.PathLayer.html">EmberLeaflet.PathLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.PointPathLayer.html">EmberLeaflet.PointPathLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.PolylineLayer.html">EmberLeaflet.PolylineLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.PopupMixin.html">EmberLeaflet.PopupMixin</a></li>
            
                <li><a href="../classes/EmberLeaflet.RectangleLayer.html">EmberLeaflet.RectangleLayer</a></li>
            
                <li><a href="../classes/EmberLeaflet.TileLayer.html">EmberLeaflet.TileLayer</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/ember-leaflet.html">ember-leaflet</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: packages/ember-leaflet/lib/container.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var get = Ember.get, set = Ember.set, fmt = Ember.String.fmt,
  forEach = Ember.EnumerableUtils.forEach,
  map = Ember.EnumerableUtils.map;

/**
  A &#x60;ContainerLayer&#x60; is an &#x60;EmberLeaflet.Layer&#x60; subclass that implements &#x60;Ember.MutableArray&#x60;
  allowing programatic management of its child layers.

  @class ContainerLayer
  @namespace EmberLeaflet
  @extends EmberLeaflet.Layer
*/
EmberLeaflet.ContainerLayerMixin = Ember.Mixin.create(
    EmberLeaflet.LayerMixin, Ember.MutableArray, {
  /**
  Initialize child layers from the class variable. This should only be
  called once.
  */

  _childLayers: null,

  didCreateLayer: function() {
    this._super();
    this.createAndAddChildLayers();
  },

  willDestroyLayer: function() {
    this.removeAndDestroyChildLayers();
    this._super();
  },

  createAndAddChildLayers: function() {
    var _childLayers = this._childLayers = Ember.A(), self = this, layer;
    if(this._childLayerClasses === undefined) {
      this._childLayerClasses = get(this, &#x27;childLayers&#x27;) || [];
    }
    Ember.defineProperty(this, &#x27;childLayers&#x27;, Ember.computed(function() {
      return this._childLayers;
    }));

    forEach(this._childLayerClasses, function(layerClass, idx) {
      layer = self.createChildLayer(layerClass);
      self.addChildLayer(layer);
      _childLayers[idx] = layer;
    }, this);
  },

  replace: function(idx, removedCount, addedLayers) {
    var addedCount = addedLayers ? get(addedLayers, &#x27;length&#x27;) : 0,
      self = this;
    this.arrayContentWillChange(idx, removedCount, addedCount);
    this.childLayersWillChange(this._childLayers, idx, removedCount);

    if (addedCount === 0) {
      this._childLayers.splice(idx, removedCount);
    } else {
      // instantiate class objects, make sure controller and 
      // _parentLayer is set for each layer object added.
      addedLayers = map(addedLayers, function(layer) {
        return self.createChildLayer(layer);
      });
      var args = [idx, removedCount].concat(addedLayers);
      if (addedLayers.length &amp;&amp; !this._childLayers.length) {
        this._childLayers = this._childLayers.slice();
      }
      this._childLayers.splice.apply(this._childLayers, args);
    }
    this.arrayContentDidChange(idx, removedCount, addedCount);
    this.childLayersDidChange(this._childLayers, idx, removedCount,
      addedCount);
    return this;
  },

  objectAt: function(idx) {
    return this._childLayers[idx];
  },

  length: Ember.computed(function () {
    return this._childLayers.length;
  }),

  childLayersWillChange: function(layers, start, removed) {
    var self = this;
    this.propertyWillChange(&#x27;childLayers&#x27;);
    if(removed &gt; 0) {
      var removedLayers = layers.slice(start, start + removed);
      forEach(removedLayers, function(layer) {
        self.removeChildLayer(layer);
      });
    }
  },

  childLayersDidChange: function(layers, start, removed, added) {
    var self = this;
    if(added &gt; 0) {
      var addedLayers = layers.slice(start, start + added);
      forEach(addedLayers, function(layer) {
        self.addChildLayer(layer);
      });
    }
    this.propertyDidChange(&#x27;childLayers&#x27;);
  },

  addChildLayer: function(layer) {
    layer._createLayer();
  },

  removeChildLayer: function(layer) {
    layer._destroyLayer();
  },

  createChildLayer: function(layerClass, attrs) {
    attrs = attrs || {};
    attrs.controller = this.get(&#x27;controller&#x27;);
    attrs._parentLayer = this.isVirtual ? this._parentLayer : this;
    var layerInstance;
    var layerType = Ember.typeOf(layerClass);
    Ember.assert(
      fmt(&quot;layerClass %@ must be an Ember instance or class.&quot;,
        layerClass ? layerClass.toString() : &#x27;&lt;undefined&gt;&#x27;),
        layerType === &#x27;instance&#x27; || layerType === &#x27;class&#x27;);
    if(layerType === &#x27;instance&#x27;) {
      layerInstance = layerClass;
      layerInstance.setProperties(attrs);
    } else if (layerType === &#x27;class&#x27;){
      layerInstance = layerClass.create(attrs);
    }
    return layerInstance;
  },

  removeAndDestroyChildLayers: function() {
    var self = this;
    if(this._childLayers) {
      forEach(this._childLayers, function(layer) {
        self.removeChildLayer(layer);
        layer.destroy();
      });
    }
    this._childLayers = [];
  }

});

EmberLeaflet.ContainerLayer = Ember.Object.extend(
    EmberLeaflet.ContainerLayerMixin, {});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
